<!DOCTYPE html>
<html lang="en" itemscope itemtype="http://schema.org/WebPage">
<head>
  <meta name="generator" content="Hugo 0.51" />
  <meta charset="utf-8">
  <title>Notes about Migrating from Qwerty to Dvorak · City of Wings</title>
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="description" content="Windows Newer versions of Windows could use different keyboard layouts for the login screen. Just choose it when installing or add the relevant input method in language settings. Linux Newer versions of Linux distributions also support dvorak layout when installing. If you want to set the layout temporarily, you could also use the following commands: setxkbmap dvorak # change to dvorak setxkbmap us # change back to qwerty Xrdp If" />

  <meta name="keywords" content="Shaform, open source, Python, machine learning, software" />
<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.2.0/css/all.css" integrity="sha384-hWVjflwFxL6sNzntih27bfxkr27PmbbK/iSvJ+a4+0owXq79v+lsFkW54bOGbiDQ" crossorigin="anonymous">
<link rel="stylesheet" href="https://city.shaform.com/css/den.css">




<meta property="og:title" content="Notes about Migrating from Qwerty to Dvorak" />
<meta property="og:description" content="Windows Newer versions of Windows could use different keyboard layouts for the login screen. Just choose it when installing or add the relevant input method in language settings. Linux Newer versions of Linux distributions also support dvorak layout when installing. If you want to set the layout temporarily, you could also use the following commands: setxkbmap dvorak # change to dvorak setxkbmap us # change back to qwerty Xrdp If" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://city.shaform.com/en/2013/07/12/qwerty-to-dvorak/" /><meta property="article:published_time" content="2013-07-12T18:53:00&#43;08:00"/>
<meta property="article:modified_time" content="2013-07-12T18:53:00&#43;08:00"/><meta property="og:site_name" content="City of Wings" />

<meta itemprop="name" content="Notes about Migrating from Qwerty to Dvorak">
<meta itemprop="description" content="Windows Newer versions of Windows could use different keyboard layouts for the login screen. Just choose it when installing or add the relevant input method in language settings. Linux Newer versions of Linux distributions also support dvorak layout when installing. If you want to set the layout temporarily, you could also use the following commands: setxkbmap dvorak # change to dvorak setxkbmap us # change back to qwerty Xrdp If">


<meta itemprop="datePublished" content="2013-07-12T18:53:00&#43;08:00" />
<meta itemprop="dateModified" content="2013-07-12T18:53:00&#43;08:00" />
<meta itemprop="wordCount" content="438">



<meta itemprop="keywords" content="dvorak,linux,qwerty,windows,自由行列,行列,輸入法," />
<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Notes about Migrating from Qwerty to Dvorak"/>
<meta name="twitter:description" content="Windows Newer versions of Windows could use different keyboard layouts for the login screen. Just choose it when installing or add the relevant input method in language settings. Linux Newer versions of Linux distributions also support dvorak layout when installing. If you want to set the layout temporarily, you could also use the following commands: setxkbmap dvorak # change to dvorak setxkbmap us # change back to qwerty Xrdp If"/>

<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'UA-13132274-1', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>
</head>
<body>
  
  <div class="header-container" style="background: linear-gradient(rgba(0, 0, 0, 0.2), rgba(0, 0, 0, 0.2)), url('https://city.shaform.com/images/background.jpg'); background-position: center; background-size: cover;">
  <div class="container">
  <nav class="header-nav navbar navbar-expand-md navbar-dark light-dark">
    <div class="header-logo navbar-brand">
      
        <a class="float-left" href="https://city.shaform.com/en/">
      
        
        <img class="mr20 header-logo-image" src="https://city.shaform.com/images/fly.png" alt="logo">
        
        
          City of Wings
         
      </a>
    </div>
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="nav-menu collapse navbar-collapse" id="navbarNav">
      <ul class="navbar-nav">
        
          <li class="nav-item">
            
              
                <a class="nav-link" href="https://city.shaform.com/en/category/ideas/">Ideas</a>
              
            
          </li>
        
          <li class="nav-item">
            
              
                <a class="nav-link" href="https://city.shaform.com/en/category/notes/">Notes</a>
              
            
          </li>
        
          <li class="nav-item">
            
              
                <a class="nav-link" href="https://city.shaform.com/en/category/projects/">Projects</a>
              
            
          </li>
        
          <li class="nav-item">
            
              
                <a class="nav-link" href="https://www.google.com/search?q=site:city.shaform.com">Search</a>
              
            
          </li>
        
        
          
            <li class="nav-item">
              <a class="nav-link" href="https://city.shaform.com/zh/"><i class="fas fa-globe"></i> 繁體中文</a>
            </li>
          
          
          
          
        
      </ul>
    </div>
  </nav>
</div>

<div class="container header-wrapper">
  <div class="row">
    <div class="col-lg-12">
      <div class="header-content">
        <h1 class="header-title">Notes about Migrating from Qwerty to Dvorak</h1>
        <p class="header-date">By
          Yong-Siang Shih /
        
        Fri 12 July 2013
          / In categories
          <a href="https://city.shaform.com/en/category/notes/">Notes</a>
        </p>
        
        <div class="header-underline"></div>
        
          <div class="clearfix"></div>
          <p class="float-right header-tags">
              <i class="fas fa-tags" aria-hidden="true"></i>
              <a href="https://city.shaform.com/en/tag/dvorak/">dvorak</a>, 
                <a href="https://city.shaform.com/en/tag/linux/">linux</a>, 
                <a href="https://city.shaform.com/en/tag/qwerty/">qwerty</a>, 
                <a href="https://city.shaform.com/en/tag/windows/">windows</a>, 
                <a href="https://city.shaform.com/en/tag/%E8%87%AA%E7%94%B1%E8%A1%8C%E5%88%97/">自由行列</a>, 
                <a href="https://city.shaform.com/en/tag/%E8%A1%8C%E5%88%97/">行列</a>, 
                <a href="https://city.shaform.com/en/tag/%E8%BC%B8%E5%85%A5%E6%B3%95/">輸入法</a>
          </p>
        
        <div class="clearfix"></div>
<p class="float-right translations">
    <i class="fas fa-language" aria-hidden="true"></i>
    Translations: 
    <a href="https://city.shaform.com/zh/2013/07/12/qwerty-to-dvorak/">ZH</a>
</p>


      </div>
    </div>
  </div>
</div>

  </div>
<div class="container content">
  

<h2 id="windows">Windows</h2>

<p>Newer versions of Windows could use different keyboard layouts for the login
screen.  Just choose it when installing or add the relevant input method in
language settings.</p>

<h2 id="linux">Linux</h2>

<p>Newer versions of Linux distributions also support dvorak layout when installing.</p>

<p>If you want to set the layout temporarily, you could also use the following commands:</p>

<div class="sh-highlight"><div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash"><span class="hl">setxkbmap dvorak <span class="c1"># change to dvorak</span>
</span><span class="hl">setxkbmap us <span class="c1"># change back to qwerty</span></span></code></pre></div></div>


<h2 id="xrdp">Xrdp</h2>

<p>If you are using rdp to connect to remote linux servers, the keyboard layout is
controlled by a separate configuration file. The file is located in
/etc/xrdp/km-****.ini, where **** is the language suffix.</p>

<p>If you are able to login the server locally without rdp. You could use the following
command to generate key map when you are using dvorak.</p>

<div class="sh-highlight"><div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash"><span class="hl">xrdp-genkeymap km-now.ini</span></code></pre></div></div>


<p>Afterwards, we could use this generated file to replace the settings.</p>

<div class="sh-highlight"><div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash"><span class="hl">sudo mv km-now.ini /etc/xrdp/km-0409.ini</span></code></pre></div></div>


<p>Of course, you may want to backup the file before you run the above command.</p>

<div class="sh-highlight"><div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash"><span class="hl">sudo mv /etc/xrdp/km-0409.ini /etc/xrdp/km-0409.ini.old</span></code></pre></div></div>


<p>Restart the xrdp server to load the configuration.</p>

<div class="sh-highlight"><div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash"><span class="hl">sudo /etc/init.d/xrdp restart</span></code></pre></div></div>


<p>However, if you are unable to login locally, you would not be able to generate
the correct file because you are unable to change keyboard layout to dvorak.
So I created a Python script to convert km-0409.ini to dvorak settings.</p>
<div class="highlight"><pre class="chroma"><code class="language-python" data-lang="python"><span class="ch">#!/usr/bin/env python</span>
<span class="c1"># xrdpkeymap_qwerty_to_dvorak.py</span>
<span class="s2">&#34;&#34;&#34;
</span><span class="s2">Usage: python xrdpkeymap_qwerty_to_dvorak.py km-input.ini &gt; km-output.ini
</span><span class="s2">&#34;&#34;&#34;</span>
<span class="kn">import</span> <span class="nn">fileinput</span>
<span class="kn">import</span> <span class="nn">re</span>

<span class="c1"># keycodes</span>
<span class="c1"># $ xmodmap -pk for current mapping</span>
<span class="c1"># ref: http://forums.fedoraforum.org/showthread.php?t=265100</span>
<span class="n">QWERTY</span> <span class="o">=</span> <span class="p">(</span>
        <span class="mi">20</span><span class="p">,</span> <span class="mi">21</span><span class="p">,</span>
        <span class="mi">24</span><span class="p">,</span> <span class="mi">25</span><span class="p">,</span> <span class="mi">26</span><span class="p">,</span> <span class="mi">27</span><span class="p">,</span> <span class="mi">28</span><span class="p">,</span> <span class="mi">29</span><span class="p">,</span> <span class="mi">30</span><span class="p">,</span> <span class="mi">31</span><span class="p">,</span> <span class="mi">32</span><span class="p">,</span> <span class="mi">33</span><span class="p">,</span> <span class="mi">34</span><span class="p">,</span> <span class="mi">35</span><span class="p">,</span>
        <span class="mi">38</span><span class="p">,</span> <span class="mi">39</span><span class="p">,</span> <span class="mi">40</span><span class="p">,</span> <span class="mi">41</span><span class="p">,</span> <span class="mi">42</span><span class="p">,</span> <span class="mi">43</span><span class="p">,</span> <span class="mi">44</span><span class="p">,</span> <span class="mi">45</span><span class="p">,</span> <span class="mi">46</span><span class="p">,</span> <span class="mi">47</span><span class="p">,</span> <span class="mi">48</span><span class="p">,</span>
        <span class="mi">52</span><span class="p">,</span> <span class="mi">53</span><span class="p">,</span> <span class="mi">54</span><span class="p">,</span> <span class="mi">55</span><span class="p">,</span> <span class="mi">56</span><span class="p">,</span> <span class="mi">57</span><span class="p">,</span> <span class="mi">58</span><span class="p">,</span> <span class="mi">59</span><span class="p">,</span> <span class="mi">60</span><span class="p">,</span> <span class="mi">61</span>
        <span class="p">)</span>

<span class="n">DVORAK</span> <span class="o">=</span> <span class="p">(</span>
        <span class="mi">34</span><span class="p">,</span> <span class="mi">35</span><span class="p">,</span>
        <span class="mi">48</span><span class="p">,</span> <span class="mi">59</span><span class="p">,</span> <span class="mi">60</span><span class="p">,</span> <span class="mi">33</span><span class="p">,</span> <span class="mi">29</span><span class="p">,</span> <span class="mi">41</span><span class="p">,</span> <span class="mi">42</span><span class="p">,</span> <span class="mi">54</span><span class="p">,</span> <span class="mi">27</span><span class="p">,</span> <span class="mi">46</span><span class="p">,</span> <span class="mi">61</span><span class="p">,</span> <span class="mi">21</span><span class="p">,</span>
        <span class="mi">38</span><span class="p">,</span> <span class="mi">32</span><span class="p">,</span> <span class="mi">26</span><span class="p">,</span> <span class="mi">30</span><span class="p">,</span> <span class="mi">31</span><span class="p">,</span> <span class="mi">40</span><span class="p">,</span> <span class="mi">43</span><span class="p">,</span> <span class="mi">28</span><span class="p">,</span> <span class="mi">57</span><span class="p">,</span> <span class="mi">39</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span>
        <span class="mi">47</span><span class="p">,</span> <span class="mi">24</span><span class="p">,</span> <span class="mi">44</span><span class="p">,</span> <span class="mi">45</span><span class="p">,</span> <span class="mi">53</span><span class="p">,</span> <span class="mi">56</span><span class="p">,</span> <span class="mi">58</span><span class="p">,</span> <span class="mi">25</span><span class="p">,</span> <span class="mi">55</span><span class="p">,</span> <span class="mi">52</span>
        <span class="p">)</span>

<span class="n">TRANS_DICT</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="n">QWERTY</span><span class="p">,</span> <span class="n">DVORAK</span><span class="p">))</span>


<span class="n">re_title</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="nb">compile</span><span class="p">(</span><span class="s1">&#39;\[.*\]</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="n">re_keydef</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="nb">compile</span><span class="p">(</span><span class="s1">&#39;Key(\d+)=(.*)</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="n">buf</span> <span class="o">=</span> <span class="p">[]</span>
<span class="n">buf_dict</span> <span class="o">=</span> <span class="p">{}</span>

<span class="k">def</span> <span class="nf">output_keydefs</span><span class="p">():</span>
    <span class="k">global</span> <span class="n">buf</span><span class="p">,</span> <span class="n">buf_dict</span>
    <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">buf</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">TRANS_DICT</span><span class="p">:</span>
            <span class="k">print</span> <span class="s1">&#39;Key</span><span class="si">%d</span><span class="s1">=</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">k</span><span class="p">,</span> <span class="n">buf_dict</span><span class="p">[</span><span class="n">TRANS_DICT</span><span class="p">[</span><span class="n">k</span><span class="p">]])</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">print</span> <span class="s1">&#39;Key</span><span class="si">%d</span><span class="s1">=</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">k</span><span class="p">,</span> <span class="n">buf_dict</span><span class="p">[</span><span class="n">k</span><span class="p">])</span>
    <span class="n">buf</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">buf_dict</span> <span class="o">=</span> <span class="p">{}</span>


<span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">fileinput</span><span class="o">.</span><span class="nb">input</span><span class="p">():</span>
        <span class="k">if</span> <span class="n">re_title</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">line</span><span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">output_keydefs</span><span class="p">()</span>
            <span class="k">print</span> <span class="n">line</span><span class="p">,</span>
        <span class="k">elif</span> <span class="n">re_keydef</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">line</span><span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">m</span> <span class="o">=</span> <span class="n">re_keydef</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>
            <span class="n">buf</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">m</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">1</span><span class="p">)))</span>
            <span class="n">buf_dict</span><span class="p">[</span><span class="nb">int</span><span class="p">(</span><span class="n">m</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">1</span><span class="p">))]</span> <span class="o">=</span> <span class="n">m</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">print</span> <span class="n">line</span><span class="p">,</span>

<span class="c1"># output remaining keys</span>
<span class="n">output_keydefs</span><span class="p">()</span></code></pre></div>
<h2 id="vim">Vim</h2>

<p>Sometimes we cannot even restart xrdp server. We may try to use the following commands in Vim.
This enables us to use dvorak at least in Vim.</p>
<div class="highlight"><pre class="chroma"><code class="language-vim" data-lang="vim"><span class="nx">set</span> <span class="nx">keymap</span><span class="p">=</span><span class="nx">dvorak</span><span class="err">
</span><span class="err"></span><span class="nx">set</span> <span class="nx">langmap</span><span class="p">=-=</span><span class="nx">qwertyuiop</span>[]<span class="nx">sdfghjkl</span>\\;<span class="s1">&#39;zxcvbn\\,./_+QWERTYUIOP{}SDFGHJKL:\&#34;ZXCVBN&lt;&gt;?;[]&#39;</span>\\<span class="p">,</span>.<span class="nx">pyfgcrl</span>/<span class="p">=</span><span class="nx">oeuidhtns</span><span class="p">-</span>\\;<span class="nx">qjkxbwvz</span>{}\<span class="c">&#34;&lt;&gt;PYFGCRL?+OEUIDHTNS_:QJKXBWVZ</span></code></pre></div>
<h2 id="download">Download</h2>

<p>Refer to <a href="https://github.com/shaform/dvorak-tools">shaform/dvorak-tools</a> for all script files.</p>


  
  
    
    <div class="author-card">
    <div class="underline"></div>
    <div class="author-box">
      <div class="author-image"><a href="https://shaform.com"><img src="/images/shaform.jpg" alt="Yong-Siang Shih" /></a></div>
      <div class="author-content">
      <p class="author-title">Author</p>
      <p class="author-name">Yong-Siang Shih</p>
      <p class="author-desc">Software Engineer, Machine Learning Scientist, Open Source Enthusiast. Worked at Appier building machine learning systems, and interned at Google, IBM, and Microsoft as software engineering intern. Love to learn and build things.</p>
      </div>
    </div>
  </div>
    
  
  
<div class="disqus-comment">
<div>
<div class="comment-underline"></div>
</div>
<div class="btn btn-secondary disqus-button" id="load_disqus" onclick="load_disqus()">
  Load Disqus Comments
</div>
<div id="disqus_thread"></div>
<script>
  var disqus_config = function () {
    this.page.url = "https://city.shaform.com/en/2013/07/12/qwerty-to-dvorak/";
  };
  function load_disqus() {
    
    
    if (window.location.hostname === 'localhost') return;

    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    var disqus_shortname = 'cityofwings';
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    dsq.setAttribute('data-timestamp', +new Date());
    (document.head || document.body).appendChild(dsq);

    $('#load_disqus').remove();
  };
</script>
<noscript>Please enable JavaScript to view the
  <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a>
</noscript>

</div>


</div>
<div class="footer gradient-2">
  <div class="container footer-container ">
    <div class="row">
      <div class="col-xs-4 col-sm-3 col-md-3 col-lg-3">
        <div class="footer-title">Sitemap</div>
        <ul class="list-unstyled">
            
              
                <li><a href="https://city.shaform.com/en/tags/">Tags</a></li>
              
              
                <li><a href="https://city.shaform.com/en/categories/">Categories</a></li>
              
            
            
            
            <li><a rel="alternate" type="application/rss&#43;xml" href="https://city.shaform.com/en/index.xml"><i class="fas fa-rss-square"></i> RSS Feed</a></li>
            
            
        </ul>
      </div>
      <div class="col-xs-4 col-sm-3 col-md-3 col-lg-3">
        
      </div>
      <div class="col-xs-4 col-sm-3 col-md-3 col-lg-3">
        
        <div class="footer-title">Links</div>
        <ul class="list-unstyled">
          
          <li><a href="https://shaform.com/" rel="noopener" target="_blank">About Me</a></li>
          
          <li><a href="https://island.shaform.com/en/" rel="noopener" target="_blank">An Island</a></li>
          
        </ul>
        
      </div> 
      <div class="col-xs-12 col-sm-3 col-md-3 col-lg-3">
        <p class="pull-right text-right">
          <small><em>Proudly powered by <a href="https://gohugo.io/" rel="noopener" target="_blank">Hugo</a></em></small><br/>
          <small><em>Theme - <a href="https://github.com/shaform/hugo-theme-den" rel="noopener" target="_blank">Den</a></em></small><br/>
          <small>
            &copy; 
            Shaform
            
              2010 -
            2018
          </small>
          
        </p>
      </div>
    </div>
  </div>
</div>
<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy" crossorigin="anonymous"></script>
<script>
$(document).ready(function() {
  if ($('#load_disqus').length) {
    $(window).scroll(function() {
      if ($('#load_disqus').length) {
        var elementTop = $('#load_disqus').offset().top;
        var viewportTop = $(window).scrollTop();
        var viewportBottom = viewportTop + $(window).height();
        if (viewportTop < elementTop && elementTop < viewportBottom) {
          load_disqus();
        }
      }
    });
  }
});
</script>

</body>
</html>
